<template>
    <template lwc:if={showSpinner}>
        <div class="spinnerContainer">
            <lightning-spinner alternative-text="Loading" variant="brand" size="medium"></lightning-spinner>
        </div>
    </template>
    <template lwc:if={isInit}>
        <h2 class="comm-forgot-password__title slds-text-heading_large slds-text-align_center slds-var-p-around_large slds-m-bottom_x-large">Forgot your password?</h2>
        <template lwc:if={passwordChangeSuccess}>
            <p class="slds-m-vertical_medium">Your password has been successfully updated.</p>
        </template>
        <template lwc:elseif={enteredOTP}>
            <div class="slds-p-around_medium">

                <p class="slds-m-vertical_medium">Please enter and confirm your new password.</p>

                <lightning-input type="password" label="New Password" class="newPassword" value={newPassword} onchange={handleNewPasswordChange} required></lightning-input>
                <lightning-input type="password" label="Confirm New Password" class="confirmNewPassword" value={confirmNewPassword} onchange={handleConfirmNewPasswordChange} required></lightning-input>

                <div class="slds-m-vertical_small">
                    <lightning-button variant="brand-outline" label="Resend Code" title="Resend Code" onclick={handleResendCode} class="slds-m-right_x-small"></lightning-button>
                    <lightning-button variant="brand-outline" label="Re-enter Code" title="Re-enter Code" onclick={handleReenterCode} class="slds-m-right_x-small"></lightning-button>
                    <lightning-button variant="brand" label="Update" title="Change" onclick={handleUpdatePassword} class="slds-m-left_x-small"></lightning-button>
                </div>

            </div>
        </template>
        <template lwc:elseif={hasOTP}>
            <div class="slds-p-around_medium">
                
                <p class="slds-m-vertical_medium">Please check your email for a One-Time-Passcode and enter it below.</p>

                <lightning-input type="text" label="One Time Passcode" class="otp" value={otpCode} onchange={handleotpCodeChange} required></lightning-input>
                
                <div class="slds-m-vertical_small">
                    <lightning-button variant="brand-outline" label="Resend Code" title="Resend Code" onclick={handleResendCode} class="slds-m-right_x-small"></lightning-button>
                    <lightning-button variant="brand" label="Next" title="Next" onclick={handleNext} class="slds-m-left_x-small"></lightning-button>
                </div>

            </div>
        </template>
        <template lwc:else> 

            <div class="slds-p-around_medium">

                <p class="slds-m-vertical_medium">To reset your password, enter your username. We'll send a one time password to the email address associated with your account, which you will enter on the next screen.</p>

                <lightning-input type="email" label="Username" value={username} onchange={handleUsernameChange} class="username" required></lightning-input>

                <div class="slds-m-vertical_small">
                    <lightning-button variant="brand-outline" label="I already have a code" title="I already have a code" onclick={handleAlreadyHaveCode} class="slds-m-right_x-small"></lightning-button>
                    <lightning-button variant="brand" label="Reset" title="Reset" onclick={handleRequestOTP} class="slds-m-left_x-small"></lightning-button>
                </div>

            </div>

        </template>
    </template>
   

</template>